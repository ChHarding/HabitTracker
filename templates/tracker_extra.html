

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Heather Lewin">
    <meta name='description' content="Semester project for HCI5840 Fall 2024">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <title>75 Hard Challenge Tracker</title>
    <script>

      //tracking water
      let water_num = {{water_num}}

      function addWater(amount) {
        water_num += amount;
        document.getElementById('water_display').innerText = water_num;
      }


      // Toggle visibility of a task's information
      function toggleTaskInfo(taskId, arrowId) {
        const taskInfo = document.getElementById(taskId);
        const arrow = document.getElementById(arrowId);
        if (taskInfo.style.display === 'none' || !taskInfo.style.display) {
          taskInfo.style.display = 'block';
          arrow.textContent = '▼'; // Down arrow
        } else {
          taskInfo.style.display = 'none';
          arrow.textContent = '▲'; // Up arrow
        }
      }
  
      // Update progress bar based on completed tasks
      function updateProgressBar(dailyData) {
        const progressSegments = document.querySelectorAll('.progress-segment');
        const completedTasks = Object.values(dailyData).filter(task => task).length;
  
        progressSegments.forEach((segment, index) => {
          if (index < completedTasks) {
            segment.classList.add('completed');
          } else {
            segment.classList.remove('completed');
          }
        });
      }
  
      // Update tracker grid for streaks
      function updateStreakTracker(streak) {
        for (let i = 1; i <= 75; i++) {
          const dayElement = document.getElementById(`day-${i}`);
          if (i <= streak) {
            dayElement.classList.add('completed');
            dayElement.classList.remove('incomplete');
          } else {
            dayElement.classList.remove('completed');
            dayElement.classList.add('incomplete');
          }
        }
      }
  
      // Initialize on page load
      window.onload = function() {

        const taskInfoSections = document.querySelectorAll('.info');
        taskInfoSections.forEach(section => {
          section.style.display = 'none';
        });

        const streak = {{ streak }};
        const dailyData = {
          water: {{ daily_data['Water'] | tojson }},
          exercise1: {{ daily_data['Exercise'] | tojson }},
          exercise2: {{ daily_data['Exercise2'] | tojson }},
          diet: {{ daily_data['Diet'] | tojson }},
          read: {{ daily_data['Read'] | tojson }},
          picture: {{ daily_data['Picture'] | tojson }}
        };
        updateProgressBar(dailyData);
        updateStreakTracker({{ streak }});
      };
    </script>

  </head>
  <body>
    <h1>75 Hard Challenge Tracker</h1>
    <button onclick="window.location.href='/logout'">Logout</button>
    
    <div class="row">
      <div class="column">
        <h2>Today's Tasks</h2>
        <form action="/tracker_extra" method="post">
         
        <!--water intake-->
        <label class="task-label">
          <input type="checkbox" id="water_checkbox" name="water_checkbox" {% if daily_data.water %}checked{% endif %}>
           Drink at least 128 oz of water.
          <button type="button" class="toggle-button" onclick="toggleTaskInfo('water_info', 'water_arrow')" id="water_arrow">▲</button>
        </label>
          <div id="water_info" class="info">
            <p> Water intake so far: <span id="water_display">{{ water_num }}</span> oz</p>
              <div class="btn-group">
                <button type="button" class ="btn btn-add" onclick="addWater(8)">+ 8 oz</button>
                <button type="button" class ="btn btn-add" onclick="addWater(16)">+ 16 oz</button>
                <button type="button" class ="btn btn-add" onclick="addWater(24)">+ 24 oz</button>
              </div><br>
            <p>Other:<input type="number" id="water_intake" name="water_intake"></p>
          </div>
          <br>

          <!--exercise 1-->
            <label for="exercise_completed1" class="task-label">
              <input type="checkbox" id="exercise_checkbox1" name="exercise_checkbox1" {% if daily_data.Exercise %}checked{% endif %}>
              Outside Exercise 45 Minutes
              <button type="button" class="toggle-button" onclick="toggleTaskInfo('e1_info', 'e1_arrow')" id="e1_arrow">▲</button>
          </label>
          <div id="e1_info" class="info">
            <p>Add your exercise time and type:</p><br>
            <p for="e1_time">Time:<input type="number" id="e1_time" name="e1_time"></p><br>
            <p for="e1_type">Type:<input type="text" id="e1_type" name="e1_type"></p>
          </div>
          <br>

          <!--exercise 2-->
          <label for="exercise_completed2" class="task-label">
            <input type="checkbox" id="exercise_checkbox2" name="exercise_checkbox2" {% if daily_data.Exercise2 %}checked{% endif %}>
            Exercise 45 Minutes
            <button type="button" class="toggle-button" onclick="toggleTaskInfo('e2_info', 'e2_arrow')" id="e2_arrow">▲</button>
        </label>
          <div id="e2_info" class="info">
            <p>Add your exercise time and type:</p><br>
            <p for="e2_time">Time:<input type="number" id="e2_time" name="e2_time"></p><br>
            <p for="e2_type">Type:<input type="text" id="e2_type" name="e2_type"></p>
          </div>
          <br>

          <!--diet-->      
          <label for="diet_followed" class="task-label">
            <input type="checkbox" id="diet_checkbox" name="diet_checkbox" {% if daily_data.Diet %}checked{% endif %}>
            Diet
            <button type="button" class="toggle-button" onclick="toggleTaskInfo('diet_info', 'diet_arrow')" id="diet_arrow">▲</button>
          </label>
          <div id="diet_info" class="info">
          <label for="calories">Calories:<input type="number" id="calories" name="calories"></label>
          </div>
          <br>
          
          <!--reading-->
          <label for="read_pages" class = "task-label">
            <input type="checkbox" name="reading_checbox" id="reading_checkbox" {% if daily_data.Read %}checked{% endif %}>
            Read at least 10 pages
            <button type="button" class="toggle-button" onclick="toggleTaskInfo('reading_info', 'read_arrow')" id="read_arrow">▲</button>
          </label>
          <div id="read_info" class="info">
            <label for="pages">Number of pages:<input type="number" id="pages" name="pages"></label>
            <label for="title">Title:<input type="text" id="title" name="title"></label>
          </div>
          <br>

          <!--picture-->
          <label for="picture_taken">
            <input type="checkbox" name="picture_taken" id="picture_taken" {% if daily_data.Picture %}checked{% endif %}>
            Picture Taken
          </label>
          <br>
          
          <!--submit-->
          <button type="submit">Submit Today's Progress</button>
        </form>
        <br>
      </div>
        <div class="column">
          <h2>Day {{ streak }}</h2>
          <div class="total-tracker">
              <div class="grid-container">
                  <!-- Grid for days 1 to 75 -->
                  {% for day in range(1, 76) %}
                      <div class="grid-item" id="day-{{ day }}">{{ day }}</div>
                  {% endfor %}
              </div>
          </div>
          <h2> Daily Progress</h2>
          <div class="progress-bar">
            <div class="progress-segment" id="segment-1"></div>
            <div class="progress-segment" id="segment-2"></div>
            <div class="progress-segment" id="segment-3"></div>
            <div class="progress-segment" id="segment-4"></div>
            <div class="progress-segment" id="segment-5"></div>
            <div class="progress-segment" id="segment-6"></div>
          </div>
      </div>
  </div>

</body>
</html>


