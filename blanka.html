if request.method == 'POST':
water_intake = 'water_checkbox' in request.form
water_oz = int(request.form.get('water_oz', 0))
exercise_completed = 'exercise_checkbox1' in request.form
e1_time = int(request.form.get('e1_time', 0))
e1_type = request.form.get('e1_type', "")
exercise_completed2 = 'exercise_checkbox2' in request.form
e2_time = int(request.form.get('e2_time', 0))
e2_type = request.form.get('e2_type', "")
diet_followed = 'diet_checkbox' in request.form
calories = int(request.form.get('calories', 0))
read_pages = 'reading_checkbox' in request.form
title = request.form.get('Title', "")  
pages = request.form.get('Pages', 0)
if pages.isdigit():
    if int(pages) >= 10:
        pages = int(pages)
        read_pages = True
else:
    pages = 0    
picture_taken = 'picture_taken' in request.form
water_oz_extra = request.form.get('water_oz_extra', 0)
if water_oz_extra.isdigit():
    water_oz += int(water_oz_extra)
else:
    water_oz_extra = 0



    <--current-->
    if request.method == 'POST':
    water_intake = 'Water_intake' in request.form
    water_oz = int(request.form.get('Water_oz', 0))
    exercise_completed = 'Exercise_completed' in request.form
    e1_time = int(request.form.get('E1_Time', 0))
    e1_type = request.form.get('E1_Type', "")
    exercise_completed2 = 'Exercise_completed2' in request.form
    e2_time = int(request.form.get('E2_Time', 0))
    e2_type = request.form.get('E2_Type', "")
    diet_followed = 'Diet_followed' in request.form
    calories = int(request.form.get('Calories', 0))
    read_pages = 'Read_pages' in request.form
    title = request.form.get('Title', "")  
    pages = request.form.get('Pages', 0)
    if pages.isdigit():
        if pages >= 10:
            pages= int(pages)
            read_pages=True
    else:
        pages=0    
    picture_taken = 'Picture_taken' in request.form
    water_oz_extra=request.form.get('Water_oz_extra', 0)
    if water_oz_extra.isdigit():
        water_oz=int(water_oz)
        water_oz += int(water_oz_extra)
    else:
        water_oz_extra=0


        def check_streak(self):
        yesterday_str = (date.today() - timedelta(days=1)).strftime('%Y-%m-%d')
        self.streak_date = self.login_data.loc[self.login_data['username'] == self.username, 'streak_date'].values[0]
        
        if yesterday_str == self.streak_date:
            return True
        elif self.streak_date == self.today: #streak already updated
            return False
        else:
            self.streak = 0
            idx = self.login_data[self.login_data['username'] == self.username].index[0]
            self.login_data.at[idx, 'streak'] = self.streak
            return False



            @app.route('/tracker_extra', methods=['GET', 'POST'])
            def tracker_extra():
                today_entry = habit_tracker.daily_data[habit_tracker.daily_data['Date'] == habit_tracker.today].head(1)
                
                if request.method == 'POST':
                    water_intake = 'Water_intake' in request.form
                    water_oz_str = request.form.get('Water_oz', '0')
                    water_oz = int(water_oz_str) if water_oz_str.isdigit() else 0
                    
                    water_oz_extra_str = request.form.get('Water_oz_extra', '0')
                    water_oz_extra = int(water_oz_extra_str) if water_oz_extra_str.isdigit() else 0
                    water_oz += water_oz_extra
                    habit_tracker.water_oz = water_oz
                    
                    exercise_completed = 'Exercise_completed' in request.form
                    e1_time_str = request.form.get('E1_time', '0')
                    e1_time = int(e1_time_str) if e1_time_str.isdigit() else 0
                    e1_type = request.form.get('E1_type', "")
                    if e1_time >=45:
                        exercise_completed = True
                    
                    exercise_completed2 = 'Exercise_completed2' in request.form
                    e2_time_str = request.form.get('E2_time', '0')
                    e2_time = int(e2_time_str) if e2_time_str.isdigit() else 0
                    e2_type = request.form.get('E2_type', "")
                    if e2_time >=45:
                        exercise_completed2=True
                    
                    diet_followed = 'Diet_followed' in request.form
                    calories_str = request.form.get('Calories', '0')
                    calories = int(calories_str) if calories_str.isdigit() else 0
                    
                    read_pages = 'Read_pages' in request.form
                    title = request.form.get('Title', "")  
                    
                    pages_str = request.form.get('Pages', '0')
                    pages = int(pages_str) if pages_str.isdigit() else 0
                    if pages >= 10:
                        read_pages = True
                    
                    picture_taken = 'Picture_taken' in request.form
            
                    habit_tracker.track_habits_extended(water_intake, water_oz, exercise_completed, e1_time, e1_type, exercise_completed2, e2_time, e2_type, diet_followed, calories, read_pages, pages, title, picture_taken, water_oz_extra)
                    return redirect(url_for('tracker_extra'))
                
                # Set default values if today_entry is empty
                if today_entry.empty:
                    today_entry_data = {
                        'Water_intake': False,
                        'Exercise_completed': False,
                        'Exercise_completed2': False,
                        'Diet_followed': False,
                        'Read_pages': False,
                        'Picture_taken': False,
                        'Water_oz': 0,
                        'E1_time': 0,
                        'E1_type': '',
                        'E2_time': 0,
                        'E2_type': '',
                        'Calories': 0,
                        'Pages': 0,
                        'Title': '',
                        'Water_oz_extra': 0,
                        'Day_completed': False
                    }
                else:
                    today_entry_data = today_entry.iloc[0].to_dict()
            
                return render_template('tracker_extra.html', daily_data=today_entry_data, streak=habit_tracker.streak, water_num=habit_tracker.water_oz)